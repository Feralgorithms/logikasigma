<div class="h-16"></div>

<!-- Hero Section -->
<% if (articles && articles.length> 0) {
    const hero = articles[0];
    const category = 'Kategori ' + (hero.article_categories[0]?.categories?.name || 'Semua Artikel');
    %>
    <section class="relative w-full h-96 mb-7">
        <img src="<%= hero.cover_image || 'https://logikasigma.com/400x250' %>" class="w-full h-full object-cover"
            alt="<%= hero.title %>">

        <div class="absolute inset-0 bg-black/60 flex flex-col items-center justify-center text-center px-4">

            <h1 class="text-3xl sm:text-4xl md:text-5xl font-extrabold text-center mb-8 
             bg-gradient-to-r from-purple-500 via-pink-500 to-orange-500 
             text-transparent bg-clip-text drop-shadow-lg opacity-0 animate-fadeIn">
                <%= category.toUpperCase() %>
            </h1>

        </div>
    </section>
    <% } %>


        <!-- Artikel section -->
        <section class="py-16 bg-gray-50">
            <div class="container mx-auto px-12">
                <h2 class="text-3xl sm:text-4xl md:text-5xl font-extrabold text-center mb-8 
             bg-gradient-to-r from-purple-500 via-pink-500 to-orange-500 
             text-transparent bg-clip-text drop-shadow-lg opacity-0 animate-fadeIn">
                    Artikel Terkait
                </h2>

                <!-- Grid Artikel -->
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 scroll-fade">
                    <% if (articles && articles.length> 0) { %>
                        <% articles.slice(0, 6).forEach(article=> { %>
                            <div
                                class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-xl transition-shadow duration-300">

                                <img src="<%= article.cover_image || 'https://via.placeholder.com/400x250' %>"
                                    alt="<%= article.title %>" class="w-full h-48 object-cover">

                                <!-- Content -->
                                <div class="p-6">
                                    <!-- Title -->
                                    <h3 class="text-xl font-semibold mb-2">
                                        <a href="/article/<%= article.slug %>" class="text-gray-800 hover:text-transparent hover:bg-clip-text 
                        hover:bg-gradient-to-r from-purple-500 via-pink-500 to-orange-500">
                                            <%= article.title %>
                                        </a>
                                    </h3>

                                    <!-- Meta info -->
                                    <div class="flex flex-wrap items-center text-xs text-gray-500 mb-3">
                                        <span class="mr-3">
                                            <i class="far fa-calendar-alt mr-1"></i>
                                            <%= article.published_at ? new
                                                Date(article.published_at).toLocaleDateString('id-ID', { day: 'numeric'
                                                , month: 'long' , year: 'numeric' }) : 'Draft' %>
                                        </span>
                                        <span class="mr-3">
                                            <i class="far fa-user mr-1"></i>
                                            <%= article.users?.name || 'Anonim' %>
                                        </span>
                                    </div>

                                    <!-- Tags -->
                                    <% if (article.article_tags && article.article_tags.length> 0) { %>
                                        <% article.article_tags.forEach(at=> { %>
                                            <% if (at.tags) { %> <!-- Cek dulu -->
                                                <a href="/tag/<%= at.tags.slug %>"
                                                    class="px-3 py-1 bg-gray-100 rounded-full text-xs text-gray-700 hover:bg-gradient-to-r hover:from-purple-500 hover:via-pink-500 hover:to-orange-500 hover:text-white transition-all">
                                                    #<%= at.tags.name %>
                                                </a>
                                                <% } %>
                                                    <% }) %>
                                                        <% } %>


                                                            <!-- Excerpt -->
                                                            <p class="text-gray-600 text-sm mb-4">
                                                                <%= article.excerpt %>
                                                            </p>

                                                            <!-- Button -->
                                                            <a href="/article/<%= article.slug %>"
                                                                class="inline-block px-4 py-2 bg-gradient-to-r from-purple-500 via-pink-500 to-orange-500 text-white font-medium rounded-lg text-sm">
                                                                Baca Selengkapnya
                                                            </a>
                                </div>
                            </div>
                            <% }) %>
                                <% } else { %>
                                    <p class="col-span-3 text-center text-gray-500">Belum ada artikel terbaru.</p>
                                    <% } %>
                </div>
            </div>
        </section>